package ppcpp

const RegTemplateText = `// Generated by github.com/davyxu/protoplus
#pragma once
#include "MessageRegistry.h"
{{range SourceList $}}
#include "{{.}}"{{end}}

{{range .Structs}}
class {{.Name}}Meta : public MessageMeta
{
public:
	static const int32 Id = {{StructMsgID .}};
	virtual const char* GetMessageName( ) const override{ return "{{$.PackageName}}.{{.Name}}"; }
	virtual int32 GetMessageId( ) const override{ return {{StructMsgID .}}; }
	virtual google::protobuf::Message* NewMessage() override { return {{$.PackageName}}::{{.Name}}::default_instance().New(); }
	virtual const google::protobuf::Descriptor* GetMessageType() const override{ return {{$.PackageName}}::{{.Name}}::GetDescriptor(); }
}; {{end}}

void StaticRegisterMeta( )
{ {{range .Structs}}
	MessageRegistry::Register(new {{.Name}}Meta); {{end}}
}

`
